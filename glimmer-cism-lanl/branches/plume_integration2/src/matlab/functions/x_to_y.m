function N = x_to_y(M)

[m,n,k] = size(M);
N = zeros(m+1,n-1,k);
N(1,1:(n-1)  ,:) = 0.5*(M(1,1:(n-1),:)+M(1,2:n,:));
N(m+1,1:(n-1),:) = 0.5*(M(m,1:(n-1),:)+M(m,2:n,:));
N(2:m,1:(n-1),:) = 0.25*(M(2:m,1:(n-1),:)+M(2:m,2:n,:)+M(1:(m-1),1:(n-1),:)+M(1:(m-1),2:n,:));
  
end
